# RAG ë¬¸ì„œ íŒŒì´í”„ë¼ì¸ í’ˆì§ˆí–¥ìƒ â€” ê¸°ì•ˆì„œ(í”„ë¦°íŠ¸ë·°) ì „ìš© íŠœë‹ ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼:** 2025-10-27  
**ëŒ€ìƒ:** ê¸°ì•ˆì„œ í”„ë¦°íŠ¸ë·° ë¬¸ì„œ (ê·¸ë£¹ì›¨ì–´ ì¶œë ¥ë¬¼)  
**ë²„ì „:** v2025.10.27-printview-tuning

---

## ğŸ“‹ ìš”ì•½ (Executive Summary)

ê¸°ì•ˆì„œ í”„ë¦°íŠ¸ë·° ë¬¸ì„œ ì „ìš© íŒŒì´í”„ë¼ì¸ íŠœë‹ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼:**
- âœ… í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ êµ¬í˜„ (ì‹œí–‰ì¼ì, ê¸°ì•ˆì¼ì, ê¸°ì•ˆì, ê¸°ì•ˆë¶€ì„œ)
- âœ… ì‘ì„±ì ì˜¤ê²€ì¶œ ë°©ì§€ (Stoplist 28ê°œ + í•œê¸€ 2~4ìŒì ˆ ê²€ì¦)
- âœ… ë‚ ì§œ ì •ê·œí™” 6ë‹¨ê³„ ì²˜ë¦¬ (ë²”ìœ„/ì‹œê°„ ì œê±°, YYâ†’YYYY ë³€í™˜)
- âœ… ë…¸ì´ì¦ˆ ì œê±° ê°•í™” (ê·¸ë£¹ì›¨ì–´ URL, íƒ€ì„ìŠ¤íƒ¬í”„ íŒ¨í„´)
- âœ… í…Œì´ë¸” í—¤ë” íŒ¨í„´ ì¶”ê°€ (ê¸°ì•ˆì„œ í‘œì¤€ ì–‘ì‹ 2ì¢…)

**AC ê²€ì¦ ê²°ê³¼:**
- File A: 4/5 í†µê³¼ (claimed_totalë§Œ ë¯¸ì™„)
- File B: 5/5 ì „ì²´ í†µê³¼ âœ…

---

## 1. ì™„ë£Œ ì‘ì—… ìƒì„¸

### 1.1 TextCleaner ê·œì¹™ ê°•í™” (ë…¸ì´ì¦ˆ ì œê±°) âœ…

**ì ìš© íŒŒì¼:** `config/document_processing.yaml`

**ì¶”ê°€ëœ ë…¸ì´ì¦ˆ íŒ¨í„´:**
```yaml
text_cleaning:
  noise_patterns:
    # ê·¸ë£¹ì›¨ì–´ URL íŒ¨í„´ (3ì¢…)
    - pattern: "gw\\.channela-mt\\.com/.*approval_form_popup\\.php\\S*"
      description: "ê·¸ë£¹ì›¨ì–´ ê²°ì¬ íŒì—… ì „ì²´ URL"
    - pattern: "gw\\.channela-mt\\.com/\\S+"
      description: "ê·¸ë£¹ì›¨ì–´ ë„ë©”ì¸ URL (ê¸°íƒ€)"
    - pattern: "http://gw\\.channela-mt\\.com\\S*"
      description: "ê·¸ë£¹ì›¨ì–´ ì „ì²´ URL (http í¬í•¨)"
    
    # íƒ€ì„ìŠ¤íƒ¬í”„ íŒ¨í„´ (ë‚ ì§œ í¬í•¨)
    - pattern: "\\b\\d{1,2}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}\\.\\s*(ì˜¤ì „|ì˜¤í›„)\\s*\\d{1,2}:\\d{2}\\b"
      description: "í”„ë¦°íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ (ë‚ ì§œ í¬í•¨)"
```

**íš¨ê³¼:** ê·¸ë£¹ì›¨ì–´ í”„ë¦°íŠ¸ë·° URL ë° ì¶œë ¥ íƒ€ì„ìŠ¤íƒ¬í”„ ì™„ì „ ì œê±°

---

### 1.2 MetaParser ê¸°ì•ˆì ì˜¤ê²€ì¶œ ë°©ì§€ âœ…

**ì ìš© íŒŒì¼:** 
- `config/document_processing.yaml` (Stoplist ì •ì˜)
- `app/rag/parse/parse_meta.py` (ê²€ì¦ ë¡œì§)

**Stoplist ì¶”ê°€ (28ê°œ):**
```yaml
metadata:
  author_stoplist:
    # ëŒ€ë¬¸ì ì•½ì–´ (11ê°œ)
    - "BNC"
    - "ENG"
    - "NLE"
    - "USB"
    - "LED"
    - "HDMI"
    - "SDI"
    - "UPS"
    - "DVR"
    - "CCTV"
    - "PC"
    
    # ì¥ë¹„/ë¶€ì„œ/ìœ„ì¹˜ (17ê°œ)
    - "íœ´ëŒ€ìš©"
    - "ìŠ¤ìº”ë¬¸ì„œ"
    - "ì±„ë„A"
    - "ì±„ë„ì—ì´"
    - "ë¯¸ë””ì–´í…"
    - "ë°©ì†¡ê¸°ìˆ íŒ€"
    - "ê¸°ìˆ ê´€ë¦¬íŒ€"
    - "ì˜ìƒí¸ì§‘íŒ€"
    - "ì œì‘íŒ€"
    - "ë‰´ìŠ¤ë¹„ì „"
    - "ë³´ë„ê¸°ìˆ "
    - "ìƒì•”ì œì‘íŒ€"
    - "ê´‘í™”ë¬¸"
    - "ì‚¬ì˜¥"
    - "ì¥ë¹„"
    - "ì‹œìŠ¤í…œ"
    - "ì›Œí¬ìŠ¤í…Œì´ì…˜"
```

**ê²€ì¦ ë¡œì§ (`_validate_author()` ë©”ì„œë“œ):**
```python
def _validate_author(self, author: str) -> bool:
    if not author or not author.strip():
        return False
    
    author = author.strip()
    
    # Stoplist ì²´í¬
    if author in self.author_stoplist:
        logger.debug(f"ì‘ì„±ì Stoplist ì œì™¸: {author}")
        return False
    
    # í•œê¸€ 2~4ìŒì ˆë§Œ í—ˆìš©
    pattern = r"^[ê°€-í£]{2,4}$"
    if not re.match(pattern, author):
        logger.debug(f"ì‘ì„±ì íŒ¨í„´ ë¶ˆì¼ì¹˜: {author}")
        return False
    
    return True
```

**íš¨ê³¼:**  
- "BNC", "ENG", "íœ´ëŒ€ìš©" ë“± ì˜¤ê²€ì¶œ ì™„ì „ ì°¨ë‹¨  
- í•œê¸€ ì´ë¦„ (2~4ìŒì ˆ)ë§Œ í—ˆìš© â†’ "ìµœìƒˆë¦„" ì •í™• ì¶”ì¶œ âœ…

---

### 1.3 ë‚ ì§œ íŒŒì‹± ê·œì¹™ í‘œì¤€í™” âœ…

**ì ìš© íŒŒì¼:** `app/rag/parse/parse_meta.py`

**êµ¬í˜„:** `_normalize_date()` ë©”ì„œë“œ (6ë‹¨ê³„ ì²˜ë¦¬)

```python
def _normalize_date(self, date_str: str) -> str:
    # 1. ë²”ìœ„ ì²˜ë¦¬ (YYYY-MM-DD ~ YYYY-MM-DD â†’ ì• ë‚ ì§œ ì±„íƒ)
    range_pattern = r"(\d{4}-\d{1,2}-\d{1,2})\s*~\s*\d{4}-\d{1,2}-\d{1,2}"
    
    # 2. ì‹œê°„ ì œê±° (YYYY-MM-DD HH:MM:SS â†’ YYYY-MM-DD)
    date_str = re.sub(r"\s+\d{1,2}:\d{2}(:\d{2})?", "", date_str)
    
    # 3. YY. M. D. â†’ YYYY-MM-DD
    # "24. 10. 24" â†’ "2024-10-24"
    
    # 4. YYYY-M-D / YYYY.M.D â†’ YYYY-MM-DD
    
    # 5. ì œë¡œ íŒ¨ë”© (YYYY-M-D â†’ YYYY-MM-DD)
    
    # 6. ê²€ì¦ ë° ë°˜í™˜
    datetime.strptime(date_str, "%Y-%m-%d")
```

**ë‚ ì§œ ìš°ì„ ìˆœìœ„ (config ê¸°ë°˜):**
```yaml
metadata:
  date_priority:
    - "ì‹œí–‰ì¼ì"  # ìµœìš°ì„ 
    - "ê¸°ì•ˆì¼ì"
    - "ì‘ì„±ì¼ì"
    - "ë³´ê³ ì¼ì"
    - "íšŒì˜ì¼ì"
```

**íš¨ê³¼:**  
- File A: `"2024-10-24 ~ 2024-10-24"` â†’ `"2024-10-24"` âœ…  
- File B: `"2024-12-17 ~ 2024-12-17"` (ì‹œí–‰ì¼ì ìš°ì„ ) â†’ `"2024-12-17"` âœ…

---

### 1.4 í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ (í•µì‹¬ ê°œì„ ) âœ…

**ë¬¸ì œ:** MetadataExtractorê°€ ì˜ë¬¸ í•„ë“œë¡œ ì¶”ì¶œ â†’ MetaParserê°€ í•œê¸€ í•„ë“œ ê¸°ëŒ€ â†’ ë‚ ì§œ/ì‘ì„±ì ì†ì‹¤

**í•´ê²°:** `scripts/ingest_from_docs.py`ì— í•œê¸€ í•„ë“œ ì§ì ‘ ì¶”ì¶œ ì¶”ê°€

```python
# í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ (ê¸°ì•ˆì„œ í”„ë¦°íŠ¸ë·° ì „ìš©)
korean_fields = {}

# ì‹œí–‰ì¼ì ì¶”ì¶œ
action_date_match = re.search(
    r"ì‹œí–‰ì¼ì\s+(\d{4}[-./]\d{1,2}[-./]\d{1,2}(?:\s*~\s*\d{4}[-./]\d{1,2}[-./]\d{1,2})?)", 
    raw_text
)
if action_date_match:
    korean_fields["ì‹œí–‰ì¼ì"] = action_date_match.group(1)

# ê¸°ì•ˆì¼ì ì¶”ì¶œ
draft_date_match = re.search(
    r"ê¸°ì•ˆì¼ì\s+(\d{4}[-./]\d{1,2}[-./]\d{1,2}(?:\s+\d{1,2}:\d{2})?)", 
    raw_text
)
if draft_date_match:
    korean_fields["ê¸°ì•ˆì¼ì"] = draft_date_match.group(1)

# ê¸°ì•ˆì ì¶”ì¶œ
drafter_match = re.search(r"ê¸°ì•ˆì\s+([ê°€-í£]{2,4})", raw_text)
if drafter_match:
    korean_fields["ê¸°ì•ˆì"] = drafter_match.group(1)

# ê¸°ì•ˆë¶€ì„œ ì¶”ì¶œ
dept_match = re.search(r"ê¸°ì•ˆë¶€ì„œ\s+([^\n]+)", raw_text)
if dept_match:
    korean_fields["ê¸°ì•ˆë¶€ì„œ"] = dept_match.group(1).strip()

# ë³‘í•©
merged_meta = {**extracted_meta, **korean_fields}
parsed_meta = self.meta_parser.parse(merged_meta, ...)
```

**íš¨ê³¼:**  
- âœ… File A: display_date = `"2024-10-24"` (ì´ì „: `"ì •ë³´ ì—†ìŒ"`)
- âœ… File B: display_date = `"2024-12-17"` (ì´ì „: `"ì •ë³´ ì—†ìŒ"`)
- âœ… Drafter: `"ìµœìƒˆë¦„"` ì •í™• ì¶”ì¶œ

**ì»¤ë°‹:** `ac74ba1 - fix(ingest): í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ ë° relative_to ê²½ë¡œ ìˆ˜ì •`

---

### 1.5 TableParser í—¤ë” íŒ¨í„´ ì¶”ê°€ âœ…

**ì ìš© íŒŒì¼:** `config/document_processing.yaml`

**ì¶”ê°€ëœ íŒ¨í„´:**
```yaml
table_parsing:
  header_patterns:
    - "êµ¬ë¶„.*í•­ëª©.*(ì¡°ì¹˜)?.*ìˆ˜ëŸ‰.*ë‹¨ê°€.*(í•©ê³„|ê¸ˆì•¡)"  # ê¸°ì•ˆì„œ í‘œì¤€ ì–‘ì‹
    - "ë²ˆí˜¸.*ë‚´ìš©.*ìˆ˜ëŸ‰"  # ê°„ì†Œí™” ì–‘ì‹
```

**íš¨ê³¼:** ê¸°ì•ˆì„œ ë¹„ìš©í‘œ í—¤ë” ì¸ì‹ ê°•í™” (File A í…Œì´ë¸” êµ¬ì¡° ê°ì§€)

---

## 2. Acceptance Criteria ê²€ì¦ ê²°ê³¼

### File A: `2024-10-24_ì±„ë„ì—ì´_ì¤‘ê³„ì°¨_ë…¸í›„_ë³´ìˆ˜ê±´.pdf`

| í•­ëª© | ê¸°ëŒ€ê°’ | ì‹¤ì œê°’ | íŒì • |
|------|--------|--------|------|
| doctype | proposal | proposal | âœ… PASS |
| drafter | ìµœìƒˆë¦„ | ìµœìƒˆë¦„ | âœ… PASS |
| display_date | 2024-10-24 | 2024-10-24 | âœ… PASS |
| claimed_total | 34,340,000 | None | âŒ FAIL |
| snippet ë…¸ì´ì¦ˆ | 0ê±´ | 0ê±´ | âœ… PASS |

**ê²°ê³¼:** 4/5 í†µê³¼ (80%)

**snippet ìƒ˜í”Œ (ë…¸ì´ì¦ˆ ì—†ìŒ í™•ì¸):**
```
ê¸°ìˆ ê´€ë¦¬íŒ€-ë³´ë„ê¸°ìˆ ê´€ë¦¬íŒŒíŠ¸-202
ë¬¸ì„œë²ˆí˜¸ ì‹ ì²­êµ¬ë¶„ ì¥ë¹„êµ¬ë§¤/ìˆ˜ë¦¬ ê¸°ì•ˆì„œ
4-00684
ê¸°ì•ˆë¶€ì„œ ê¸°ìˆ ê´€ë¦¬íŒ€-ë³´ë„ê¸°ìˆ ê´€ë¦¬íŒŒíŠ¸ ì‹œí–‰ì¼ì 2024-10-24 ~ 2024-10-24
ê¸°ì•ˆì ìµœìƒˆë¦„ ë³´ì¡´ê¸°ê°„ 5ë…„
ê¸°ì•ˆì¼ì 2024-10-24 10:02 ì‹œí–‰ì ìµœìƒˆë¦„
```

**ë¯¸ì™„ë£Œ í•­ëª©:** claimed_total (í‘œ íŒŒì‹± ì´ìŠˆ - í›„ì† ì‘ì—… í•„ìš”)

---

### File B: `2024-12-16_ë°©ì†¡_í”„ë¡œê·¸ë¨_ì œì‘ìš©_ê±´ì „ì§€_ì†Œëª¨í’ˆ_êµ¬ë§¤ì˜_ê±´.pdf`

| í•­ëª© | ê¸°ëŒ€ê°’ | ì‹¤ì œê°’ | íŒì • |
|------|--------|--------|------|
| doctype | proposal | proposal | âœ… PASS |
| drafter | ìµœìƒˆë¦„ | ìµœìƒˆë¦„ | âœ… PASS |
| display_date | 2024-12-17 (ì‹œí–‰ì¼ì ìš°ì„ ) | 2024-12-17 | âœ… PASS |
| claimed_total | None | None | âœ… PASS |
| snippet ë…¸ì´ì¦ˆ | 0ê±´ | 0ê±´ | âœ… PASS |

**ê²°ê³¼:** 5/5 í†µê³¼ (100%) âœ…âœ…âœ…

**snippet ìƒ˜í”Œ (ë…¸ì´ì¦ˆ ì—†ìŒ + ì‹œí–‰ì¼ì ìš°ì„  í™•ì¸):**
```
ê¸°ìˆ ê´€ë¦¬íŒ€-ë³´ë„ê¸°ìˆ ê´€ë¦¬íŒŒíŠ¸-202
ë¬¸ì„œë²ˆí˜¸ ì‹ ì²­êµ¬ë¶„ ê¸°ì•ˆì„œ
4-00798
ê¸°ì•ˆë¶€ì„œ ê¸°ìˆ ê´€ë¦¬íŒ€-ë³´ë„ê¸°ìˆ ê´€ë¦¬íŒŒíŠ¸ ì‹œí–‰ì¼ì 2024-12-17 ~ 2024-12-17
ê¸°ì•ˆì ìµœìƒˆë¦„ ë³´ì¡´ê¸°ê°„ 5ë…„
ê¸°ì•ˆì¼ì 2024-12-16 14:10 ì‹œí–‰ì ìµœìƒˆë¦„
```

---

## 3. ë°œê²¬ëœ ì´ìŠˆ ë° ë¯¸ì™„ë£Œ í•­ëª©

### ì´ìŠˆ 1: TableParser claimed_total ë¯¸ì¶”ì¶œ âš ï¸

**ì¦ìƒ:** File Aì˜ `claimed_total`ì´ None (ê¸°ëŒ€ê°’: 34,340,000)

**ì›ì¸ ë¶„ì„:**
- TableParserê°€ í‘œë¥¼ íŒŒì‹±í•˜ì§€ë§Œ `cost_table` êµ¬ì¡°ë¡œ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
- 204ê°œ í•­ëª© ì¶”ì¶œ, total=147,538,025 (ë¶€ì •í™•), claimed_total=None
- í—¤ë” íŒ¨í„´ì€ ì¸ì‹í•˜ë‚˜ "ë¹„ìš© í•©ê³„(VATë³„ë„) 34,340,000ì›" í…ìŠ¤íŠ¸ë¥¼ claimed_totalë¡œ ë§¤í•‘ ì‹¤íŒ¨

**í•´ê²° ë°©ì•ˆ (í›„ì† ì‘ì—…):**
1. TableParserì˜ `parse()` ë©”ì„œë“œê°€ "ë¹„ìš© í•©ê³„" íŒ¨í„´ì„ claimed_totalë¡œ ì¶”ì¶œí•˜ë„ë¡ ìˆ˜ì •
2. ë˜ëŠ” ingest ìŠ¤í¬ë¦½íŠ¸ì—ì„œ "ë¹„ìš© í•©ê³„.*(\d+[,\d]*)" ì •ê·œì‹ìœ¼ë¡œ ì§ì ‘ ì¶”ì¶œ

**ìš°ì„ ìˆœìœ„:** P1 (ì„ íƒì  - ì¼ë¶€ ë¬¸ì„œë§Œ í•´ë‹¹)

---

### ì´ìŠˆ 2: ê²½ë¡œ ì²˜ë¦¬ ë²„ê·¸ ìˆ˜ì • âœ…

**ì¦ìƒ:** `'docs/incoming/file.pdf' is not in the subpath of '/home/wnstn4647/AI-CHAT'`

**ì›ì¸:** `pdf_path.relative_to(Path.cwd())` - ìƒëŒ€ ê²½ë¡œì— relative_to ì ìš© ì‹œë„

**í•´ê²°:** `pdf_path.resolve().relative_to(Path.cwd())` - ì ˆëŒ€ ê²½ë¡œ ë³€í™˜ í›„ relative_to ì ìš©

**ì»¤ë°‹:** `ac74ba1 - fix(ingest): í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ ë° relative_to ê²½ë¡œ ìˆ˜ì •`

---

## 4. íŒŒì¼ ë³€ê²½ ì´ë ¥

### 4.1 ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | ì»¤ë°‹ |
|------|-----------|------|
| `config/document_processing.yaml` | Stoplist 28ê°œ ì¶”ê°€, URL íŒ¨í„´ 3ì¢…, í‘œ í—¤ë” 2ì¢… | 2128a4f |
| `app/rag/parse/parse_meta.py` | `_validate_author()`, `_normalize_date()` ì¶”ê°€ | 2128a4f |
| `scripts/ingest_from_docs.py` | í•œê¸€ í•„ë“œ ì§ì ‘ ì¶”ì¶œ, ê²½ë¡œ ë²„ê·¸ ìˆ˜ì • | ac74ba1 |

### 4.2 ì»¤ë°‹ íˆìŠ¤í† ë¦¬

```
ac74ba1 fix(ingest): í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ ë° relative_to ê²½ë¡œ ìˆ˜ì •
2128a4f feat(rag): ê¸°ì•ˆì„œ í”„ë¦°íŠ¸ë·° ì „ìš© íŠœë‹ ì™„ë£Œ
f8d00fa feat(rag): ìš´ì˜ ì•ˆì •í™” - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ í‘œì¤€í™” ë° ì €ì ì§ˆì˜ ìµœì í™”
```

---

## 5. í›„ì† ì‘ì—… ì œì•ˆ

### P0: ì—†ìŒ (ìš´ì˜ íˆ¬ì… ê°€ëŠ¥)

### P1: claimed_total ì¶”ì¶œ ê°œì„  (ì„ íƒì )

**ì‘ì—…:** TableParser ë˜ëŠ” ingest ìŠ¤í¬ë¦½íŠ¸ì—ì„œ "ë¹„ìš© í•©ê³„" íŒ¨í„´ ì¶”ì¶œ êµ¬í˜„

**ì´ìœ :**  
- í˜„ì¬ File Aì—ì„œë§Œ ì‹¤íŒ¨ (File BëŠ” claimed_total=Noneì´ ì •ìƒ)
- ë¹„ìš© í•©ê³„ê°€ ìˆëŠ” ë¬¸ì„œë§Œ í•´ë‹¹ (ì „ì²´ ì½”í¼ìŠ¤ì˜ ì¼ë¶€)

**êµ¬í˜„ ì˜ˆì‹œ:**
```python
# Option 1: ingest ìŠ¤í¬ë¦½íŠ¸ì— ì¶”ê°€
claimed_total_match = re.search(r"ë¹„ìš©\s*í•©ê³„.*?(\d+[,\d]*)", raw_text)
if claimed_total_match:
    claimed_total = int(claimed_total_match.group(1).replace(",", ""))
```

### P2: ì½”í¼ìŠ¤ ì „ì²´ ì¬ì¸ì… (ê¶Œì¥)

**ì‘ì—…:** ê¸°ì¡´ 812ê±´ ë¬¸ì„œ ì¬ì¸ì…ìœ¼ë¡œ ë‚ ì§œ ì •ê·œí™” ì ìš©

**ëª…ë ¹:**
```bash
# DB ë°±ì—…
cp metadata.db metadata.db.bak_20251027_post_tuning

# ì „ì²´ ì¬ì¸ì…
python scripts/ingest_from_docs.py --ocr --dry-run  # ì‚¬ì „ ì ê²€
python scripts/ingest_from_docs.py --ocr  # ì‹¤ì œ ì‹¤í–‰
```

**ê¸°ëŒ€ íš¨ê³¼:**  
- ê¸°ì¡´ ë¬¸ì„œë“¤ì˜ display_dateê°€ "ì •ë³´ ì—†ìŒ" â†’ "YYYY-MM-DD" ë³€í™˜
- Stoplist ì ìš©ìœ¼ë¡œ ì˜¤ê²€ì¶œëœ ì‘ì„±ì ì •ì •

---

## 6. ìš´ì˜ ê°€ì´ë“œ

### 6.1 ì‹ ê·œ ë¬¸ì„œ íˆ¬ì…

```bash
# 1. PDF íŒŒì¼ì„ incoming í´ë”ì— ë³µì‚¬
cp /path/to/*.pdf docs/incoming/

# 2. ì‹¤í–‰ (OCR ìë™ ì²˜ë¦¬)
python scripts/ingest_from_docs.py --ocr

# 3. ê²°ê³¼ í™•ì¸
cat logs/ingest_$(date +%Y%m%d)*.json
```

### 6.2 ëª¨ë‹ˆí„°ë§ ì§€í‘œ

**P0 (ì¦‰ì‹œ í™•ì¸):**
- ì„±ê³µë¥ : â‰¥ 90%
- display_date "ì •ë³´ ì—†ìŒ" ë¹„ìœ¨: < 5%
- drafter Stoplist ì°¨ë‹¨ ê±´ìˆ˜ (ë¡œê·¸ í™•ì¸)

**P1 (ì£¼ê°„ í™•ì¸):**
- ë‚ ì§œ ì •ê·œí™” ì‹¤íŒ¨ ê±´ìˆ˜
- ì‘ì„±ì ì˜¤ê²€ì¶œ ê±´ìˆ˜

---

## 7. í…ŒìŠ¤íŠ¸ ë¡œê·¸

### ì¸ì… ì„±ê³µ (2ê±´)

```
ì´ íŒŒì¼: 2
âœ… ì„±ê³µ: 2 (100%)
âŒ ì‹¤íŒ¨: 0
ğŸ” ì¤‘ë³µ: 0
í‰ê·  ì²˜ë¦¬ ì‹œê°„: 250ms/íŒŒì¼
```

**File A:**
- duration_ms: 462
- actions: hash â†’ extracted=8543chars â†’ cleaned=7082chars â†’ doctype=proposal â†’ meta_parsed â†’ saved â†’ db_upserted â†’ processed

**File B:**
- duration_ms: 37
- actions: hash â†’ extracted=599chars â†’ cleaned=442chars â†’ doctype=proposal â†’ meta_parsed â†’ saved â†’ db_upserted â†’ processed

---

## 8. ê²°ë¡ 

### í•µì‹¬ ì„±ê³¼

1. âœ… **í•œê¸€ í•„ë“œëª… ì§ì ‘ ì¶”ì¶œ** - ë©”íƒ€ë°ì´í„° ì†ì‹¤ ë¬¸ì œ í•´ê²° (display_date ë³µì›)
2. âœ… **ì‘ì„±ì ì˜¤ê²€ì¶œ ë°©ì§€** - Stoplist + ì •ê·œì‹ ì´ì¤‘ ê²€ì¦
3. âœ… **ë‚ ì§œ ì •ê·œí™” 6ë‹¨ê³„** - ë²”ìœ„/ì‹œê°„/YY í˜•ì‹ ëª¨ë‘ ì²˜ë¦¬
4. âœ… **ë…¸ì´ì¦ˆ ì œê±° ê°•í™”** - ê·¸ë£¹ì›¨ì–´ URL/íƒ€ì„ìŠ¤íƒ¬í”„ ì™„ì „ ì œê±°
5. âœ… **ê²½ë¡œ ë²„ê·¸ ìˆ˜ì •** - ì¸ì… íŒŒì´í”„ë¼ì¸ ì•ˆì •ì„± í™•ë³´

### AC ë‹¬ì„±ë„

- **ì „ì²´:** 9/10 (90%)
- **File A:** 4/5 (80%) - claimed_totalë§Œ ë¯¸ì™„
- **File B:** 5/5 (100%) âœ…âœ…âœ…

### ìš´ì˜ íˆ¬ì… íŒì •

âœ… **GO (ìš´ì˜ íˆ¬ì… ê¶Œì¥)**

**ê·¼ê±°:**
- í•µì‹¬ AC (doctype, drafter, display_date, snippet) ëª¨ë‘ í†µê³¼
- File B 100% í†µê³¼ë¡œ íŒŒì´í”„ë¼ì¸ ì •ìƒ ì‘ë™ í™•ì¸
- claimed_total ì´ìŠˆëŠ” ì¼ë¶€ ë¬¸ì„œë§Œ í•´ë‹¹ (P1 í›„ì† ì‘ì—…)

**ì „ì œ ì¡°ê±´:**
- OCR í™œì„±í™” í•„ìˆ˜: `--ocr` í”Œë˜ê·¸ ì‚¬ìš©
- ë¡œê·¸ ëª¨ë‹ˆí„°ë§ (ë‚ ì§œ ì •ê·œí™”, Stoplist ì°¨ë‹¨ ê±´ìˆ˜)

---

**ì‘ì„±ì¼:** 2025-10-27  
**ì‘ì„±ì:** Claude Code  
**ìµœì¢… íŒì •:** âœ… **íŠœë‹ ì™„ë£Œ - ìš´ì˜ íˆ¬ì… ê°€ëŠ¥**
