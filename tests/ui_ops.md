# UI/UX ìš´ì˜ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ì¼ì‹œ**: 2025-10-31
**í…ŒìŠ¤íŠ¸ í™˜ê²½**: WSL2, Python 3.12, RTX 4060
**ë°±ì—”ë“œ**: FastAPI (port 7860)
**í”„ë¡ íŠ¸ì—”ë“œ**: Streamlit (port 8501)

---

## ì‚¬ì „ ì¤€ë¹„

### 1. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
# FastAPI í—¬ìŠ¤ì²´í¬
curl -s http://localhost:7860/_healthz
# Expected: {"status": "ok"}

# Streamlit ì‹¤í–‰
streamlit run web_interface.py --server.port 8501 --server.headless true
```

**ìƒíƒœ**: â³ ìˆ˜ë™ í™•ì¸ í•„ìš”
**ê²°ê³¼**:
- [ ] FastAPI ì‘ë‹µ OK
- [ ] Streamlit ì •ìƒ ê¸°ë™

---

## í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### 1. ëª©ë¡/íŽ˜ì´ì§€ë„¤ì´ì…˜

#### 1.1 ê¸°ë³¸ ëª©ë¡ (20ê°œ ì œí•œ)

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì§ˆì˜ ìž…ë ¥: "ìµœìƒˆë¦„ ë¬¸ì„œ ì°¾ì•„ì¤˜"
2. ì‘ë‹µ ê²°ê³¼ í™•ì¸
3. ì¶œì²˜(evidence) ê°œìˆ˜ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- ìµœëŒ€ 20ê°œ ë¬¸ì„œ í‘œì‹œ
- `display_limit=20` ì ìš© í™•ì¸

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/pagination_basic.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

#### 1.2 ì „ì²´ ëª©ë¡ ("ì „ë¶€/ì „ì²´" í‚¤ì›Œë“œ)

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì§ˆì˜ ìž…ë ¥: "ìµœìƒˆë¦„ ë¬¸ì„œ ì „ë¶€ ë³´ì—¬ì¤˜"
2. ì‘ë‹µ ê²°ê³¼ í™•ì¸
3. ë‹¤ë¥¸ í‚¤ì›Œë“œ í…ŒìŠ¤íŠ¸:
   - "ìµœìƒˆë¦„ ë¬¸ì„œ ì „ì²´ ë³´ì—¬ì¤˜"
   - "ìµœìƒˆë¦„ ë¬¸ì„œ ëª¨ë“  ê²ƒ ë³´ì—¬ì¤˜"
   - "ìµœìƒˆë¦„ ë¬¸ì„œ ëª¨ë‘ ë³´ì—¬ì¤˜"

**ì˜ˆìƒ ê²°ê³¼**:
- ëª¨ë“  ë§¤ì¹­ ë¬¸ì„œ í‘œì‹œ (ì˜ˆ: 134ê°œ)
- `display_limit` ë¬´ì œí•œ ì ìš©
- Evidence(ì¶œì²˜)ë„ ë™ì¼í•˜ê²Œ ì „ì²´ í‘œì‹œ

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/pagination_all.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 2. ë¯¸ë¦¬ë³´ê¸° í† ê¸€

#### 2.1 ë‹¨ì¼ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ë¬¸ì„œ ëª©ë¡ì—ì„œ "ðŸ”Ž ë¯¸ë¦¬ë³´ê¸°" ë²„íŠ¼ í´ë¦­
2. ë¯¸ë¦¬ë³´ê¸° ì°½ í‘œì‹œ í™•ì¸
3. ë‹¤ì‹œ ë²„íŠ¼ í´ë¦­í•˜ì—¬ ë‹«ê¸°

**ì˜ˆìƒ ê²°ê³¼**:
- ë²„íŠ¼ ìƒíƒœ ë³€ê²½: "ðŸ”Ž ë¯¸ë¦¬ë³´ê¸°" â†” "ðŸ“– ë¯¸ë¦¬ë³´ëŠ”ì¤‘"
- PDF ë¯¸ë¦¬ë³´ê¸° ì •ìƒ í‘œì‹œ
- í† ê¸€ ì‹œ ìƒíƒœ ìœ ì§€

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/preview_single.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

#### 2.2 ë‹¤ì¤‘ íŒŒì¼ ë™ì‹œ ë¯¸ë¦¬ë³´ê¸°

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì²« ë²ˆì§¸ ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸° ì—´ê¸°
2. ë‘ ë²ˆì§¸ ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸° ì—´ê¸°
3. ì„¸ ë²ˆì§¸ ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸° ì—´ê¸°
4. ê°ê° ê°œë³„ì ìœ¼ë¡œ ë‹«ê¸°

**ì˜ˆìƒ ê²°ê³¼**:
- ê° íŒŒì¼ì˜ í† ê¸€ ìƒíƒœ ë…ë¦½ì ìœ¼ë¡œ ìœ ì§€
- `st.rerun()` í›„ì—ë„ ìƒíƒœ ìœ ì§€
- í•´ì‹œ ê¸°ë°˜ í‚¤ ë™ìž‘ ì •ìƒ

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/preview_multiple.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 3. doc_locked ë™ìž‘

#### 3.1 íŠ¹ì • íŒŒì¼ ì§€ì • ìš”ì•½

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì§ˆì˜ ìž…ë ¥: "2025-09-11_ëŒì§êµ¬ì‡¼_ë°±ì—…_ë¬´ì„ ë§ˆì´í¬_êµ¬ë§¤_ê±´.pdf ìš”ì•½í•´ì¤˜"
2. ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸: `grep "doc_locked" logs/ai-chat.log`
3. ì‘ë‹µ ì¶œì²˜ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- ë¡œê·¸ì— `doc_locked=True` í‘œì‹œ
- í•´ë‹¹ ë¬¸ì„œì˜ ì²­í¬ë§Œ ì‚¬ìš©
- ë‹¤ë¥¸ ë¬¸ì„œ ì²­í¬ ë¯¸í¬í•¨

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ë¡œê·¸ ì¶œë ¥**:
```
[ê²€ì¦ í•„ìš”] grep "doc_locked" logs/ai-chat.log
```

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 4. í‚¤ì›Œë“œ ë¼ìš°íŒ…

#### 4.1 SUMMARY ëª¨ë“œ íŠ¸ë¦¬ê±°

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì§ˆì˜ ìž…ë ¥ (ê°ê° í…ŒìŠ¤íŠ¸):
   - "ê²€í† ì„œ ìš”ì•½í•´ì¤˜"
   - "ê¸°ì•ˆì„œ ìš”ì•½í•´ì¤˜"
   - "ìµœìƒˆë¦„ ìž‘ì„± ë¬¸ì„œ ìš”ì•½í•´ì¤˜"

**ì˜ˆìƒ ê²°ê³¼**:
- ì‘ë‹µ ëª¨ë“œ: `SUMMARY`
- êµ¬ì¡°í™”ëœ JSON ì‘ë‹µ
- í•„ìˆ˜ í•„ë“œ: title, drafter, date, main_content

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/mode_summary.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

#### 4.2 QA ëª¨ë“œ + ì¸ìš© ë³´ìž¥

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ì§ˆì˜ ìž…ë ¥: "EX-3 ê´€ë ¨ ë¬¸ì„œ ì°¾ì•„ì¤˜"
2. has_code=True í™•ì¸
3. ì¸ìš©(sources) ì¡´ìž¬ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- ì‘ë‹µ ëª¨ë“œ: `QA`
- has_code: `True`
- ì¶œì²˜ ì¸ìš© ë³´ìž¥ (Citation Rate = 1.0)

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/mode_qa_code.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 5. ì˜¤ë¥˜ ì²˜ë¦¬

#### 5.1 ì‚­ì œëœ íŒŒì¼ ì²˜ë¦¬

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ìž„ì‹œë¡œ íŒŒì¼ ì´ë™: `mv docs/year_2025/test.pdf /tmp/`
2. í•´ë‹¹ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° ì‹œë„
3. ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- ì‚¬ìš©ìž ì¹œí™”ì  ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
- "íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë“±ì˜ ê°€ì´ë“œ ë¬¸êµ¬
- ì• í”Œë¦¬ì¼€ì´ì…˜ í¬ëž˜ì‹œ ì—†ìŒ

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/error_missing_file.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

#### 5.2 JSON íŒŒì‹± ì‹¤íŒ¨ í´ë°±

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ë³µìž¡í•œ ì§ˆì˜ë¡œ JSON íŒŒì‹± ì‹¤íŒ¨ ìœ ë„
2. ì‘ë‹µ í˜•ì‹ í™•ì¸
3. ë°°ë„ˆ ë©”ì‹œì§€ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- ìžìœ  í˜•ì‹ ìš”ì•½ìœ¼ë¡œ í´ë°±
- "êµ¬ì¡°í™”ëœ í˜•ì‹ ìƒì„± ì‹¤íŒ¨, ìžìœ  ìš”ì•½ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤" ë°°ë„ˆ í‘œì‹œ
- ì‘ë‹µ ë‚´ìš©ì€ ì—¬ì „ížˆ ìœ ìš©í•¨

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ìŠ¤í¬ë¦°ìƒ·**: `screenshots/error_json_fallback.png`

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 6. ìž¬ìƒ‰ì¸ ìƒí˜¸ë°°ì œ

#### 6.1 Mutex ë™ìž‘ í™•ì¸

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ìžë™ ì¸ë±ì„œ ë™ìž‘ ì¤‘ í™•ì¸: `ls -la var/reindexing.lock`
2. UIì—ì„œ Drop&Rebuild ì‹œë„
3. ìƒí˜¸ë°°ì œ ë©”ì‹œì§€ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- `var/reindexing.lock` ì¡´ìž¬ ì‹œ ìž¬ìƒ‰ì¸ ê±°ë¶€
- ì‚¬ìš©ìž ë©”ì‹œì§€: "ìž¬ìƒ‰ì¸ì´ ì´ë¯¸ ì§„í–‰ ì¤‘ìž…ë‹ˆë‹¤"
- í¬ëž˜ì‹œ ì—†ìŒ

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”
**ë¡œê·¸ ì¶œë ¥**:
```
[ê²€ì¦ í•„ìš”] Lock íŒŒì¼ ìƒíƒœ ë° UI ì‘ë‹µ
```

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

#### 6.2 /metrics ê°±ì‹  í™•ì¸

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. ìž¬ìƒ‰ì¸ ì™„ë£Œ í›„ `/metrics` í™•ì¸
2. ì§€í‘œ ê°’ ê²€ì¦

```bash
curl -s http://localhost:7860/metrics | jq '.'
```

**ì˜ˆìƒ ê²°ê³¼**:
```json
{
  "stale_index_entries": 0,
  "last_full_reindex_ts": "2025-10-31T...",
  "fs_file_count": 488,
  "index_file_count": 488
}
```

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### 7. ì ‘ê·¼ì„± (ì„ íƒì‚¬í•­)

#### 7.1 í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. Tab í‚¤ë¡œ ìˆœíšŒ
2. ì´ë™ ìˆœì„œ í™•ì¸: ìž…ë ¥ì°½ â†’ ëª©ë¡ â†’ ë²„íŠ¼ â†’ ë¯¸ë¦¬ë³´ê¸°

**ì˜ˆìƒ ê²°ê³¼**:
- ë…¼ë¦¬ì ì¸ Tab ìˆœì„œ
- í¬ì»¤ìŠ¤ í‘œì‹œ ëª…í™•
- Enter í‚¤ë¡œ ë²„íŠ¼ í™œì„±í™” ê°€ëŠ¥

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

**í†µê³¼ ì—¬ë¶€**: â¬œ (ì„ íƒ)

---

## ì„±ëŠ¥ ì§€í‘œ

### /metrics ì‘ë‹µ ì‹œê°„

```bash
time curl -s http://localhost:7860/metrics > /dev/null
```

**ëª©í‘œ**: < 50ms
**ì‹¤ì œ**: â³ ì¸¡ì • í•„ìš”
**í†µê³¼ ì—¬ë¶€**: â¬œ

---

### í•µì‹¬ ì§€í‘œ í™•ì¸

```bash
curl -s http://localhost:7860/metrics | jq '{
  stale_index_entries,
  fs_file_count,
  index_file_count,
  last_full_reindex_ts
}'
```

**ì˜ˆìƒ**:
- `stale_index_entries`: 0
- `fs_file_count` â‰ˆ `index_file_count`

**ì‹¤ì œ**: â³ í™•ì¸ í•„ìš”
**í†µê³¼ ì—¬ë¶€**: â¬œ

---

## ìš”ì•½

### í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì§‘ê³„

| ì¹´í…Œê³ ë¦¬ | í•­ëª© | í†µê³¼ | ì‹¤íŒ¨ | ë¯¸ì‹¤í–‰ |
|---------|------|------|------|--------|
| íŽ˜ì´ì§€ë„¤ì´ì…˜ | 2 | 0 | 0 | 2 |
| ë¯¸ë¦¬ë³´ê¸° | 2 | 0 | 0 | 2 |
| doc_locked | 1 | 0 | 0 | 1 |
| í‚¤ì›Œë“œ ë¼ìš°íŒ… | 2 | 0 | 0 | 2 |
| ì˜¤ë¥˜ ì²˜ë¦¬ | 2 | 0 | 0 | 2 |
| ìž¬ìƒ‰ì¸ | 2 | 0 | 0 | 2 |
| ì ‘ê·¼ì„± | 1 | 0 | 0 | 1 |
| **ì´ê³„** | **12** | **0** | **0** | **12** |

### ë°œê²¬ëœ ì´ìŠˆ

â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í›„ ê¸°ë¡

---

## ìŠ¹ì¸ ê¸°ì¤€ (AC)

- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ 100% í†µê³¼ (12/12)
- [ ] /metrics ì‘ë‹µ ì‹œê°„ < 50ms
- [ ] stale_index_entries = 0
- [ ] í¬ë¦¬í‹°ì»¬ ì´ìŠˆ 0ê±´

---

## í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ìž

**ì´ë¦„**: _______________
**ì¼ì‹œ**: _______________
**ì„œëª…**: _______________

---

## ë¹„ê³ 

ì´ ë¬¸ì„œëŠ” ìˆ˜ë™ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ìž…ë‹ˆë‹¤. ì‹¤ì œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ ì‹œ:
1. ê° í•­ëª©ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
2. ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ (`screenshots/` ë””ë ‰í† ë¦¬)
3. ë¡œê·¸ ì¶œë ¥ ì²¨ë¶€
4. ë°œê²¬ëœ ì´ìŠˆëŠ” "ë°œê²¬ëœ ì´ìŠˆ" ì„¹ì…˜ì— ê¸°ë¡
5. ëª¨ë“  í•­ëª© ì™„ë£Œ í›„ ìŠ¹ì¸ ê¸°ì¤€ ì²´í¬

**ìƒì„± ì¼ì‹œ**: 2025-10-31
**ìµœì¢… ìˆ˜ì •**: 2025-10-31
